import { Meta } from "@storybook/blocks";

<Meta title="Layout v6/Design Principles" />

# Design Principles

## TLDR;

> CSS first, lean and component per DOM node.

## CSS first

The [Layout v5 (LEGACY)](/docs/layout-v5-introduction--docs) relies on a bunch of JS functions to generate the layout.
It's a powerful approach but it's not the best for performance and maintainability.
Back then, it was the best approach that I could think of with the limitation of CSS.

However, with the trend of React Server Components and the evolution of CSS, I've decided to rewrite the layout library from scratch
by focusing on the CSS first.

There is no React context used in this version. It's just a bunch of advanced CSS techniques that make the layout possible.
This includes CSS variables, CSS grid, :has, and [Cyclic dependency toggle](https://kizu.dev/cyclic-toggles/).

To be honest, I don't expect anyone to understand how the layout works under the hood because it is very CSS specific use case.
You should just import the components as documented, add configuration and you are good to add your components to each part of the layout.

## Lean

The layout v6 is designed to be as minimal as possible.
With the power of CSS `:has`, each component contains styles that can affect others to fulfill the requirements.
If your layout are not using `InsetSidebar`, the styles related to it won't be included in the final bundle.

Additionally, I am able to remove the usage of React context so the layout can be React Server Components (with a help from [Pigment CSS](https://github.com/mui/pigment-css)).

## Component per DOM node

For maximum flexibility, each component is a single DOM node.
This comes with a risk of incorrect usage but it's a trade-off for flexibility.
